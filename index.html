<html>
  <head>
    <title>Dynasties</title>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://www.gstatic.cn/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['timeline']});
      google.charts.setOnLoadCallback(drawChart);
      function drawChart() {
        var container = document.getElementById('timeline');
        var chart = new google.visualization.Timeline(container);
        var dataTable = new google.visualization.DataTable();

        dataTable.addColumn({ type: 'string', id: 'Dynasties' });
        dataTable.addColumn({ type: 'string', id: 'Dynasty' });
        dataTable.addColumn({ type: 'date', id: 'Start' });
        dataTable.addColumn({ type: 'date', id: 'End' });

        $.ajax('dynasties.json').done(function (data) {
          for (i = 0; i < data.length; i++) {
            for (j = 2; j < 4; j++) {
              const d = new Date(undefined, data[i][j][1]);
              d.setFullYear(data[i][j][0] || data[i][j]);
              if (data[i][j][1]) {
                d.setMonth(data[i][j][1] - 1);
              }
              if (data[i][j][2]) {
                d.setDate(data[i][j][2]);
              }
              data[i][j] = d;
            }
          }
          dataTable.addRows(data);

          chart.draw(dataTable);
        });
      }
    </script>
  </head>
  <body style="margin: 0;">
    <div id="timeline" style="min-height: 703px; min-width: 1578px;"></div>
  </body>
</html>
